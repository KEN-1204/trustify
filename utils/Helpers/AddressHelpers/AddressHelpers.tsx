/*
æ—¥æœ¬ã®ä½æ‰€ãƒ‡ãƒ¼ã‚¿ã®å‰å‡¦ç†ã«ãŠã‘ã‚‹å…¨è§’è‹±æ•°å­—ã®æ‰±ã„
ä¸€èˆ¬çš„ãªCRMã‚µãƒ¼ãƒ“ã‚¹ã‚„ãã®ä»–ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚·ã‚¹ãƒ†ãƒ ã§æ—¥æœ¬ã®ä½æ‰€ã‚’æ‰±ã†éš›ã€å…¨è§’è‹±æ•°å­—ã®åŠè§’åŒ–ã¯ã‚ˆãæŽ¨å¥¨ã•ã‚Œã‚‹ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã§ã™ã€‚ã“ã‚Œã¯ã€ä»¥ä¸‹ã®ç†ç”±ã‹ã‚‰è¡Œã‚ã‚Œã¾ã™ï¼š

æ¤œç´¢ã®ä¸€è²«æ€§ã¨åŠ¹çŽ‡: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†…ã§ã®æ¤œç´¢åŠ¹çŽ‡ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã«ã€å…¨è§’ã¨åŠè§’ã®ä¸ä¸€è‡´ã«ã‚ˆã‚‹æ¤œç´¢ãƒŸã‚¹ã‚’é¿ã‘ã‚‹ç›®çš„ã§è¡Œã‚ã‚Œã¾ã™ã€‚å…¨è§’è‹±æ•°å­—ã‚’åŠè§’ã«çµ±ä¸€ã™ã‚‹ã“ã¨ã§ã€æ¤œç´¢ã‚¯ã‚¨ãƒªãŒå˜ç´”åŒ–ã•ã‚Œã€ã‚ˆã‚Šé€Ÿãã€ã‚ˆã‚Šæ­£ç¢ºãªçµæžœãŒå¾—ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ãƒ‡ãƒ¼ã‚¿ã®æ¨™æº–åŒ–: ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ¸›ã‚‰ã—ã€å ±å‘Šã‚„åˆ†æžã®éš›ã®ä¸€è²«æ€§ã‚’ä¿ã¤ãŸã‚ã«ã€å…¨è§’æ–‡å­—ã‚’åŠè§’ã«å¤‰æ›ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ãŒå‘ä¸Šã—ã€ã‚·ã‚¹ãƒ†ãƒ é–“ã§ã®ãƒ‡ãƒ¼ã‚¿ã®äº’æ›æ€§ãŒä¿ãŸã‚Œã¾ã™ã€‚

ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®å‘ä¸Š: ãƒ•ã‚©ãƒ¼ãƒ ã‚„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ä¸Šã§ã®ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ã‚’æ¨™æº–åŒ–ã™ã‚‹ã“ã¨ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒäºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ã‚„æ··ä¹±ã‚’é¿ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

CRMã‚µãƒ¼ãƒ“ã‚¹ã«ãŠã‘ã‚‹å…¨è§’è‹±æ•°å­—ã¨è¨˜å·ã®æ¨™æº–åŒ–
CRMã‚µãƒ¼ãƒ“ã‚¹ã‚„ä»–ã®ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã®ãƒ‡ãƒ¼ã‚¿æ¨™æº–åŒ–ã«ãŠã„ã¦ã€å…¨è§’è‹±æ•°å­—ã¨è¨˜å·ã‚’åŠè§’ã«çµ±ä¸€ã™ã‚‹æ–¹é‡ã¯ä¸€èˆ¬çš„ã§ã™ã€‚ã“ã‚Œã¯ä»¥ä¸‹ã®ç†ç”±ã«ã‚ˆã‚Šã¾ã™ï¼š

ãƒ‡ãƒ¼ã‚¿ã®ä¸€è²«æ€§: å…¨è§’ã¨åŠè§’ã®æ··åœ¨ã‚’è§£æ¶ˆã™ã‚‹ã“ã¨ã§ã€ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ãŒå‘ä¸Šã—ã€æ¤œç´¢ã€ã‚½ãƒ¼ãƒˆã€ãƒ¬ãƒãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®éš›ã«äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ã‚„å•é¡ŒãŒæ¸›å°‘ã—ã¾ã™ã€‚

æ¤œç´¢æ€§ã®å‘ä¸Š: å…¨è§’æ–‡å­—ã¨åŠè§’æ–‡å­—ã®æ··åœ¨ã¯æ¤œç´¢ã‚¯ã‚¨ãƒªã®è¤‡é›‘åŒ–ã‚’æ‹›ãã¾ã™ã€‚ç‰¹ã«ã€å¤šæ§˜ãªãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’æ‰±ã†CRMã‚·ã‚¹ãƒ†ãƒ ã§ã¯ã€ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ¸›ã‚‰ã™ã“ã¨ãŒé‡è¦ã§ã™ã€‚

å›½éš›åŒ–å¯¾å¿œ: å›½éš›çš„ãªé¡§å®¢ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã†å ´åˆã€æ§˜ã€…ãªè¨€èªžã‚„æ–‡å­—ç¨®ã«å¯¾å¿œã™ã‚‹ãŸã‚ã€æ–‡å­—ã®çµ±ä¸€ã¯ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ã‚’å®¹æ˜“ã«ã—ã¾ã™ã€‚


*/

import { RegionNameJpType } from "@/utils/selectOptions";
import { regExpPrefecture, regionNameToRegExpCitiesJp } from "./regExpAddress";

// ã€è¨˜å·ã®è¨±å®¹ã«ã¤ã„ã¦ã€‘
// ãƒ»è¨˜å·ã®ä½¿ç”¨ï¼šåŠè§’ãƒã‚¤ãƒ•ãƒ³ã¯ç•ªåœ°ã€ã‚¢ãƒ‘ãƒ¼ãƒˆã®ç•ªå·ã®åŒºåˆ‡ã‚Šæ–‡å­—ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã‚‹ãŸã‚è¨±å®¹
// ãƒ»è¨˜å·ã®æ¨™æº–åŒ–ï¼šå…¨è§’è¨˜å·ã‚’åŠè§’ã«å¤‰æ›ã¯DBã®ä¸€è²«æ€§ã‚’ä¿ã¤ãŸã‚ã«ä¸€èˆ¬çš„ãªæ‰‹æ³•ã ãŒã€ä½æ‰€ãƒ‡ãƒ¼ã‚¿ã¯å¿…è¦ãªè¨˜å·ã ã‘ã‚’ä¿æŒã—ã€ä¸å¿…è¦ãªã‚‚ã®ã¯å‰Šé™¤

// ã€æ—¥æœ¬ã¨è‹±èªžåœã®ä½æ‰€æ¨™æº–åŒ–ã€‘
/**
1. æ­£è¦åŒ–ï¼š
   ãƒ»å…¨è§’æ–‡å­—ã‚’åŠè§’ã«å¤‰æ›
   ãƒ»ä¸è¦ãªã‚¹ãƒšãƒ¼ã‚¹ã€è¨˜å·ã®å‰Šé™¤ ãƒ»æ—¥æœ¬ä½æ‰€ã§ã¯ã€å…¨è§’æ•°å­—ã¨å…¨è§’ãƒã‚¤ãƒ•ãƒ³ã‚’åŠè§’ã«å¤‰æ›
2. å½¢å¼ã®çµ±ä¸€(ä½æ‰€è¦ç´ ã‚’ä¸€å®šã®é †åºã§é…ç½®)
   ãƒ»æ—¥æœ¬ï¼šå›½åãƒ»éƒµä¾¿ç•ªå·ãƒ»éƒ½é“åºœçœŒãƒ»å¸‚åŒºç”ºæ‘ãƒ»ç•ªåœ°ãƒ»å»ºç‰©å
   ãƒ»è‹±èªžåœï¼šé€šã‚Šã®åå‰ãƒ»ç•ªåœ°ãƒ»å¸‚åãƒ»è¥²åãƒ»éƒµä¾¿ç•ªå·
3. ä¸è¦ãªæƒ…å ±ã®å‰Šé™¤
   ãƒ»ä½æ‰€ä»¥å¤–ã®ã€Œè§’ã®è–¬å±€ã¾ã§æ¥ã¦ãã ã•ã„ã€ãªã©ã®æŒ‡ç¤ºãªã©ã‚’å‰Šé™¤
4. ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
   ãƒ»å¯èƒ½ã§ã‚ã‚Œã°ã€éƒµä¾¿ç•ªå·ã®æ­£ç¢ºæ€§ã‚’æ¤œè¨¼ã—ã€å­˜åœ¨ã—ãªã„ä½æ‰€ã‚„èª¤ã£ãŸéƒµä¾¿ç•ªå·ã‚’ä¿®æ­£
 */

export function normalizeAddress(address: string) {
  address = address.trim(); // åŸºæœ¬çš„ãªãƒˆãƒªãƒŸãƒ³ã‚°

  // ðŸ”¹1. æ­£è¦åŒ–
  // å…¨è§’è‹±æ•°å­—ã¨å…¨è§’è¨˜å·ã®ä¸¡æ–¹ã‚’åŠè§’ã«å¤‰æ›([ï¼-ï¼™ï¼¡-ï¼ºï½-ï½š]ã‚’å«ã‚€) *1
  address = address.replace(/[\uFF01-\uFF5E]/g, (ch) => String.fromCharCode(ch.charCodeAt(0) - 0xfee0));

  // å…¨è§’ãƒã‚¤ãƒ•ãƒ³ã¨å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ã‚’åŠè§’ã«å¤‰æ›(é•·éŸ³ã€Œãƒ¼ã€ã¯ãã®ã¾ã¾æ®‹ã™) *3
  address = address.replace(/[ï¼âˆ’]/g, "-").replace(/\u3000/g, " ");

  // é€£ç¶šã™ã‚‹ã‚¹ãƒšãƒ¼ã‚¹ã‚’1ã¤ã«æ­£è¦åŒ–
  address = address.replace(/[\s+]/g, " "); // å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ã‚’åŠè§’ã«å¤‰æ›å¾Œã€é€£ç¶šã™ã‚‹ã‚¹ãƒšãƒ¼ã‚¹ã‚’ï¼‘ã¤ã®åŠè§’ã‚¹ãƒšãƒ¼ã‚¹ã«æ­£è¦åŒ– (\s: ã™ã¹ã¦ã®ç©ºç™½æ–‡å­—ï¼ˆåŠè§’ã‚¹ãƒšãƒ¼ã‚¹ã€ã‚¿ãƒ–ã€æ”¹è¡Œãªã©(å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ã¯å«ã¾ãªã„))

  // ðŸ”¹2. å½¢å¼ã®çµ±ä¸€
  // 2-1. å„ä½æ‰€ã®è¦ç´ ã‚’å–ã‚Šå‡ºã—ã‚„ã™ãã™ã‚‹ãŸã‚ä½æ‰€ã®å…¨ã¦ã®ç©ºç™½ã‚’é™¤åŽ»ã—ãŸå¤‰æ•°ã‚’ä½œæˆ
  // 2-2. æ—¥æœ¬ã‹è‹±èªžåœã‹ã®è­˜åˆ¥ éƒ½é“åºœçœŒSetã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ãƒžãƒƒãƒã™ã‚Œã°æ—¥æœ¬ã®ä½æ‰€ / ç•ªåœ°ã‹ã‚‰å§‹ã¾ã£ã¦ã„ã‚Œã°è‹±èªžåœã®ä½æ‰€
  // ã€æ—¥æœ¬ã®ä½æ‰€ã®å½¢å¼çµ±ä¸€ã€‘
  // 2-3. éƒ½é“åºœçœŒSetã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ãƒžãƒƒãƒã—ãŸå ´åˆã¯å¤‰æ•°ã‹ã‚‰éƒ½é“åºœçœŒã‚’å–ã‚Šå‡ºã™
  // 2-4. å–ã‚Šå‡ºã—ãŸéƒ½é“åºœçœŒã«å¯¾å¿œã™ã‚‹å¸‚åŒºç”ºæ‘Setã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ãƒžãƒƒãƒã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã—ã€ãƒžãƒƒãƒã—ãŸã‚‰å¸‚åŒºç”ºæ‘ã‚’å–ã‚Šå‡ºã™
  // 2-5. ä¸ç›®ã‹ã€Œ1-1ã€ãªã©ã®ç•ªåœ°ã¾ã§ã®æ–‡å­—åˆ—ã‚’ç”ºåã¨ã—ã¦å–ã‚Šå‡ºã™
  // 2-6. ç•ªåœ°ã®å½¢å¼çµ±ä¸€å‡¦ç†ã—ã¦å–ã‚Šå‡ºã™
  // 2-7. å–ã‚Šå‡ºã—ãŸç•ªåœ°ä»¥é™ã®æ–‡å­—åˆ—ãŒå­˜åœ¨ã™ã‚‹å ´åˆã¯å»ºç‰©åã¨ã—ã¦å–ã‚Šå‡ºã™
  // 2-8. å–ã‚Šå‡ºã—ãŸä½æ‰€ã®å„è¦ç´ ã‚’çµåˆã—ã¦ã€ç•ªåœ°ã¨å»ºç‰©åã®é–“ã«åŠè§’ã‚¹ãƒšãƒ¼ã‚¹ã‚’ã‚»ãƒƒãƒˆã™ã‚‹

  const isJa = true;

  // æ—¥æœ¬ã®ä½æ‰€ å½¢å¼çµ±ä¸€
  if (isJa) {
    // ä½æ‰€ã®å„è¦ç´ ã‚’ä¿æŒã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
    const addressElements: { [K in "prefecture" | "city" | "town" | "block" | "building"]: string | null } = {
      prefecture: null,
      city: null,
      town: null,
      block: null,
      building: null,
    };
    // ðŸ”¸éƒ½é“åºœçœŒã®æŠ½å‡º
    const prefectureMatch = address.match(regExpPrefecture);
    // é©åˆ‡ãªä½æ‰€ãŒå…¥åŠ›ã•ã‚Œã¦ã„ãªã‘ã‚Œã°ã€ã“ã®è¡Œãƒ‡ãƒ¼ã‚¿è‡ªä½“ã‚’nullã§è¿”ã—ã€æœ€å¾Œã«å‰Šé™¤
    if (!prefectureMatch) throw new Error("éƒ½é“åºœçœŒãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚");
    addressElements.prefecture = prefectureMatch[0];

    // ðŸ”¸å¸‚åŒºç”ºæ‘ã®æŠ½å‡º
    const regExpCity = regionNameToRegExpCitiesJp[addressElements.prefecture as RegionNameJpType];
    const cityMatch = address.match(regExpCity);
    if (!cityMatch) throw new Error("å¸‚åŒºç”ºæ‘ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚");
    addressElements.city = cityMatch[1]; // 0ã¯ãƒžãƒƒãƒå…¨ä½“ã®æ–‡å­—åˆ—ã§ 1ã¯ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚°ãƒ«ãƒ¼ãƒ—ã§ãƒžãƒƒãƒã—ãŸï¼‘ã¤ç›®ã®æ–‡å­—

    // ðŸ”¸åœ°åãƒ»ç”ºåã®æŠ½å‡º (ç•ªåœ°ã®æ•°å­—ã¾ã§ã‚’æŠœãå‡ºã—)
    const extractTownName = (address: string, city: string) => {
      // prefectureã¨cityã®å¾Œã®åœ°åã‚’æŠ½å‡ºã™ã‚‹æ­£è¦è¡¨ç¾ã‚’å‹•çš„ã«ç”Ÿæˆ
      // const regex = new RegExp(`${prefecture}\\s*${city}\\s*(.*?)\\d`, "i");

      // ç©ºç™½æ–‡å­—ã‚’å‰Šé™¤ 'æ±äº¬éƒ½ æ¸¯åŒº èŠæµ¦ 4-20-2 èŠæµ¦ã‚¢ã‚¤ãƒ©ãƒ³ãƒ‰4F' => 'æ±äº¬éƒ½æ¸¯åŒºèŠæµ¦4-20-2èŠæµ¦ã‚¢ã‚¤ãƒ©ãƒ³ãƒ‰4F'
      const addressWithoutSpace = address.replace(/[\s\u3000]+/g, "");
      // å¸‚åŒºç”ºæ‘ã®ç›´å¾Œã®åœ°åã®é–‹å§‹ä½ç½®ã‚’å–å¾— 'æ±äº¬éƒ½æ¸¯åŒºèŠæµ¦4-20-2èŠæµ¦ã‚¢ã‚¤ãƒ©ãƒ³ãƒ‰4F' => 'èŠæµ¦'ã®èŠã®index: 5
      const startIndex = addressWithoutSpace.indexOf(city) + city.length;
      // åœ°åã®çµ‚äº†ä½ç½®ã‚’å–å¾— (å¸‚åŒºç”ºæ‘åä»¥é™ã®éƒ¨åˆ†ã‹ã‚‰èµ·ç®—ã—ã¦æœ€åˆã®æ•°å­—ã®ä½ç½®ã‚’æŽ¢ã™)
      const subStringFromCityEnd = addressWithoutSpace.substring(startIndex); // => 'èŠæµ¦4-20-2èŠæµ¦ã‚¢ã‚¤ãƒ©ãƒ³ãƒ‰4F'
      // const relativeEndIndex = subStringFromCityEnd.search(/\d/); // æœ€åˆã®æ•°å­—ã®ä½ç½®ã‚’æŽ¢ã™(ç›¸å¯¾ä½ç½®)
      const relativeEndIndex = subStringFromCityEnd.search(/\dä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾åƒ/); // æœ€åˆã®æ•°å­—ã®ä½ç½®ã‚’æŽ¢ã™(ç›¸å¯¾ä½ç½®)

      // åœ°åã®çµ‚äº†ä½ç½®ã‚’çµ¶å¯¾ä½ç½®ã«å¤‰æ›
      const endIndex = startIndex + relativeEndIndex;

      // åœ°åã‚’æŠ½å‡º
      const town = addressWithoutSpace.substring(startIndex, endIndex);

      return town;
    };

    const { prefecture, city } = addressElements;
    const townName = extractTownName(address, city);

    if (!townName) throw new Error("åœ°åãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚");
    addressElements.town = townName;

    // å¸‚åŒºç”ºæ‘ä»¥ä¸‹ã®æƒ…å ±ã‚’ä¸€æ‹¬ã—ã¦æ‰±ã†; çµåŸŽå¸‚å¤§å­—ä¸ƒäº”ä¸‰å ´å…­ç™¾å››åäº”ç•ªåœ°ä¸ƒ ã®ã‚ˆã†ã«
    // ã€Œä¸ç›®ãƒ»ç•ªåœ°(ç•ª)ãƒ»å·ã€ãŒæ¼¢æ•°å­—ã®å ´åˆã€ã€Œç”ºå(åœ°å)ã€ã¨ã€Œä¸ç›®ãƒ»ç•ªåœ°(ç•ª)ãƒ»å·ã€ã®å¢ƒç•Œã‚’æ­£ç¢ºã«ç‰¹å®šã™ã‚‹ã®ãŒå›°é›£ã®ãŸã‚

    // // ðŸ”¸ä¸ç›®ãƒ»ç•ªåœ°ãƒ»å·ã®æŠ½å‡º(ç•ªåœ°ãƒ»å·ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«)
    // const extractBlockName = (address: string, town: string) => {
    //   // ç©ºç™½æ–‡å­—ã‚’å‰Šé™¤ 'æ±äº¬éƒ½ æ¸¯åŒº èŠæµ¦ 4-20-2 èŠæµ¦ã‚¢ã‚¤ãƒ©ãƒ³ãƒ‰4F' => 'æ±äº¬éƒ½æ¸¯åŒºèŠæµ¦4-20-2èŠæµ¦ã‚¢ã‚¤ãƒ©ãƒ³ãƒ‰4F'
    //   const addressWithoutSpace = address.replace(/[\s\u3000]+/g, "");
    //   // åœ°åã®ç›´å¾Œã®ä¸ç›®ãƒ»ç•ªåœ°ã®é–‹å§‹ä½ç½®ã‚’å–å¾— 'æ±äº¬éƒ½æ¸¯åŒºèŠæµ¦4-20-2èŠæµ¦ã‚¢ã‚¤ãƒ©ãƒ³ãƒ‰4F' => '4-20-2'ã®4ã®index: 7
    //   const startIndex = addressWithoutSpace.indexOf(town) + town.length;
    //   // åœ°åã®çµ‚äº†ä½ç½®ã‚’å–å¾— (å¸‚åŒºç”ºæ‘åä»¥é™ã®éƒ¨åˆ†ã‹ã‚‰èµ·ç®—ã—ã¦æœ€åˆã®æ•°å­—ã®ä½ç½®ã‚’æŽ¢ã™)
    //   const addressFromTownEnd = addressWithoutSpace.substring(startIndex); // => '4-20-2èŠæµ¦ã‚¢ã‚¤ãƒ©ãƒ³ãƒ‰4F'

    //   // ä½æ‰€ã®ã€Œä¸ç›®ã€ã€Œç•ªåœ°(ç•ª)ã€ã€Œå·ã€ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€ä¸€èˆ¬çš„ã«ã€Œâ—¯ä¸ç›®ãƒ»â—¯ç•ªåœ°ï¼ˆç•ªï¼‰ãƒ»â—¯å·ã€ã®ã‚ˆã†ã«è¨˜è¼‰ã€‚
    //   // ãŸã¨ãˆã°ã€ã€Œä¸­å¤®åŒºç¯‰åœ°1-1-1ã€ã«ä½ã‚“ã§ã„ã‚‹å ´åˆã¯ã€ã€Œä¸­å¤®åŒºç¯‰åœ°ä¸€ä¸ç›®1ç•ª1å·ã€ã¨è¡¨è¨˜

    //   const kanjiNumbers = `ä¸€|äºŒ|ä¸‰|å››|äº”|å…­|ä¸ƒ|å…«|ä¹|å`

    //   // ä¸‹è¨˜ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¯¾å¿œ
    //   // ã€Œ4ä¸ç›®10ç•ªåœ°1å·ã€=>ã€Œ4-10-1ã€
    //   // ã€Œ4ä¸ç›®10-1ã€=>ã€Œ4-10-1ã€
    //   // ã€Œ1ç•ªåœ°1å·ã€=>ã€Œ1-1ã€
    //   // ã€Œ1ç•ªåœ°1ã€=>ã€Œ1-1ã€
    //   // ã€Œ1ä¸ç›®ã€=>ã€Œ1ã€

    //   // const blockRegex = /(\d+)(?:ä¸ç›®|ç•ªåœ°|ç•ª|å·|-)?(\d+)?(?:ç•ªåœ°|ç•ª|å·|-)?(\d+)?(?:å·|-)?/;
    //   const blockRegex =
    //     /([\dä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾åƒ]+)(?:ä¸ç›®|ç•ªåœ°|ç•ª|å·|-)?([\dä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾åƒ]+)?(?:ç•ªåœ°|ç•ª|å·|-)?([\dä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾åƒ]+)?(?:å·|-)?/;

    //   const matches = addressFromTownEnd.match(blockRegex);

    //   if (matches) {
    //     // ãƒžãƒƒãƒã—ãŸéƒ¨åˆ†ã‹ã‚‰ã€Œxx-xx-xxã€å½¢å¼ã‚’æ§‹ç¯‰
    //     const [_, chome = "", banchi = "", go = ""] = matches;
    //     return [chome, banchi, go].filter((x) => x).join("-");
    //   }
    //   return null;
    // };

    // const blockName = extractBlockName(address, townName);
  }

  return address;
}

/*
ðŸ”¸å…¨è§’è‹±æ•°å­—ã¨å…¨è§’è¨˜å·ã‚’ä¸¡æ–¹æŒ‡å®š *1
å…¨è§’è‹±æ•°å­—ã¨å…¨è§’è¨˜å·ã‚’å«ã‚€ \uFF01-\uFF5E ç¯„å›²ã‚’ç”¨ã„ã¦ä¸€æ‹¬ã§åŠè§’ã«å¤‰æ›ã™ã‚‹ã®ã¯ã€å®Ÿè£…ãŒã‚·ãƒ³ãƒ—ãƒ«ã§åŠ¹çŽ‡çš„ãªæ–¹æ³•ã§ã™ã€‚ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯ã€ç‰¹ã«å…¨è§’æ–‡å­—ã‚’ä¸€è²«ã—ã¦åŠè§’ã«å¤‰æ›ã—ãŸã„å ´åˆã«é©ã—ã¦ã„ã¾ã™

address = address.replace(/[\uFF01-\uFF5E]/g, (ch) =>
    String.fromCharCode(ch.charCodeAt(0) - 0xFEE0));
*/

/*
ðŸ”¸å…¨è§’è‹±æ•°å­—ã®ã¿
// å…¨è§’è‹±æ•°å­—ã®ã¿ã‚’åŠè§’ã«å¤‰æ›ã™ã‚‹å ´åˆ(å…¨è§’è¨˜å·ã‚’å¤‰æ›ã—ãªã„å ´åˆ)
// å…¨è§’ã®æ•°å­—ï¼ˆ\uFF10-\uFF19ï¼‰ã€å¤§æ–‡å­—ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆï¼ˆ\uFF21-\uFF3Aï¼‰ã€ãŠã‚ˆã³å°æ–‡å­—ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆï¼ˆ\uFF41-\uFF5Aï¼‰ã‚’å¯¾è±¡ã«åŠè§’å¤‰æ›
address = address.replace(/[ï¼¡-ï¼ºï½-ï½šï¼-ï¼™]/g, (ch) => String.fromCharCode(ch.charCodeAt(0) - 0xfee0));
address = address.replace(/[\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A]/g, (ch) =>
    String.fromCharCode(ch.charCodeAt(0) - 0xfee0)
);
*/

/*
ðŸ”¸å…¨è§’è¨˜å·ã®ã¿
å…¨è§’è¨˜å·ã®ç¯„å›²ã¯ \uFF01-\uFF5E ã§ã™ãŒã€ã“ã®ç¯„å›²ã‹ã‚‰å…¨è§’è‹±æ•°å­—ã‚’é™¤å¤–ã—ãŸã„ã®ã§ã€å…·ä½“çš„ãªå…¨è§’è¨˜å·ã®ã¿ã‚’å¯¾è±¡ã¨ã™ã‚‹ç¯„å›²ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

å…¨è§’è‹±æ•°å­—ã®Unicodeç¯„å›²ï¼ˆ\uFF10-\uFF19 ãŠã‚ˆã³ \uFF21-\uFF3A ã¨ \uFF41-\uFF5Aï¼‰ã‚’é™¤å¤–ã—ã¦ã€æ®‹ã‚Šã®è¨˜å·ã®ã¿ã‚’å¤‰æ›ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¾ã™ã€‚

// å…¨è§’è‹±æ•°å­—ã‚’é™¤ãè¨˜å·ã®ç¯„å›²ã‚’æŒ‡å®š
text.replace(/[\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF5E]/g, (ch) =>
    String.fromCharCode(ch.charCodeAt(0) - 0xFEE0));

ã“ã®æ­£è¦è¡¨ç¾ã§ã¯ã€ä»¥ä¸‹ã®ç¯„å›²ã‚’å¯¾è±¡ã¨ã—ã¦ã„ã¾ã™ï¼š

\uFF01-\uFF0Fï¼šæ„Ÿå˜†ç¬¦ï¼ˆï¼ï¼‰ã‹ã‚‰ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ï¼ˆï¼ï¼‰ã¾ã§
\uFF1A-\uFF20ï¼šã‚³ãƒ­ãƒ³ï¼ˆï¼šï¼‰ã‹ã‚‰ã‚¢ãƒƒãƒˆãƒžãƒ¼ã‚¯ï¼ˆï¼ ï¼‰ã¾ã§
\uFF3B-\uFF40ï¼šå·¦è§’æ‹¬å¼§ï¼ˆï¼»ï¼‰ã‹ã‚‰é‡ã‚¢ã‚¯ã‚»ãƒ³ãƒˆï¼ˆï½€ï¼‰ã¾ã§
\uFF5B-\uFF5Eï¼šå·¦æ³¢æ‹¬å¼§ï¼ˆï½›ï¼‰ã‹ã‚‰ãƒãƒ«ãƒ€ï¼ˆï½žï¼‰ã¾ã§
*/

// *3
// // ã€Œã€€ã€ã§ã‚‚è‰¯ã„ãŒã€‚Unicodeè¡¨è¨˜ï¼ˆ\u3000ï¼‰ã‚’æ˜Žç¤ºçš„ã«ä½¿ç”¨ã™ã‚‹æ–¹ãŒã€ã©ã®æ–‡å­—ã‚’æŒ‡ã—ã¦ã„ã‚‹ã®ã‹ãŒæ˜Žç¢ºã§ã‚ã‚Šã€ç•°ãªã‚‹ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã‚„ç’°å¢ƒã§ã®è¡¨ç¤ºã®é•ã„ã«å·¦å³ã•ã‚Œã«ãã„ãŸã‚ã€å¥½ã¾ã‚Œã‚‹ã“ã¨ãŒå¤šã„

/*
è‹±æ•°å­—
åŠè§’æ–‡å­—ã‚‚å…¨è§’æ–‡å­—ã‚‚æ–‡å­—ã‚³ãƒ¼ãƒ‰ä¸Šã§å¯¾å¿œã™ã‚‹ä¸¦ã³ã«ãªã£ã¦ã„ã‚‹ãŸã‚ã€16é€²æ•°ã§FEE0(10é€²æ•°ã§65248)è¶³ã—å¼•ãã™ã‚‹ã“ã¨ã§ç›¸äº’ã«å¤‰æ›ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

ã€Unicodeã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã€‘
ãƒ»åŠè§’æ–‡å­—ï¼šã€ŒAã€ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã¯[0041]ã€‚ã€Œzã€ã¯[007A]ã€‚
ãƒ»å…¨è§’æ–‡å­—ï¼šã€Œï¼¡ã€ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã¯[FF21]ã€‚ã€Œï½šã€ã¯[FF5a]ã€‚

ãƒ»ã€ŒåŠè§’æ–‡å­—ã€ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‹ã‚‰16é€²æ•°ã§FEE0ï¼ˆã€Œ0xFEE0ã€ï¼‰ã‚’è¶³ã™â‡’ã€Œå…¨è§’æ–‡å­—ã€ã«å¤‰æ›
ãƒ»ã€Œå…¨è§’æ–‡å­—ã€ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã«16é€²æ•°ã§FEE0ï¼ˆã€Œ0xFEE0ã€ï¼‰ã‚’å¼•ãã€€â‡’ã€ŒåŠè§’æ–‡å­—ã€ã«å¤‰æ›

(ä¾‹ï¼šJavaScript)å…¨è§’æ–‡å­—â‡’åŠè§’æ–‡å­—
Zenkaku = Zenkaku.replace(/[ï¼¡-ï¼ºï½-ï½š]/g, function(s) {
  return String.fromCharCode(s.charCodeAt(0) - 0xFEE0);
});

*/

/*
å…¨è§’è¨˜å·ã‚’åŠè§’ã«å¤‰æ›ã™ã‚‹å ´åˆ

\uFF01-\uFF0Fï¼šæ„Ÿå˜†ç¬¦ï¼ˆï¼ï¼‰ã‹ã‚‰ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ï¼ˆï¼ï¼‰ã¾ã§
\uFF1A-\uFF20ï¼šã‚³ãƒ­ãƒ³ï¼ˆï¼šï¼‰ã‹ã‚‰ã‚¢ãƒƒãƒˆãƒžãƒ¼ã‚¯ï¼ˆï¼ ï¼‰ã¾ã§
\uFF3B-\uFF40ï¼šå·¦è§’æ‹¬å¼§ï¼ˆï¼»ï¼‰ã‹ã‚‰é‡ã‚¢ã‚¯ã‚»ãƒ³ãƒˆï¼ˆï½€ï¼‰ã¾ã§
\uFF5B-\uFF5Eï¼šå·¦æ³¢æ‹¬å¼§ï¼ˆï½›ï¼‰ã‹ã‚‰ãƒãƒ«ãƒ€ï¼ˆï½žï¼‰ã¾ã§
*/

// å…¨è§’æ•°å­—ã¨ãƒã‚¤ãƒ•ãƒ³ã‚’åŠè§’ã«å¤‰æ›
//   address = address.replace(/[ï¼-ï¼™]/g, (ch) => String.fromCharCode(ch.charCodeAt(0) - 0xfee0));
