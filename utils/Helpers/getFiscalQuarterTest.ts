// Dateã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ(Dateæ–‡å­—åˆ—)ã‹ã‚‰æ±ºç®—æœˆæ—¥ã«å¿œã˜ãŸå››åŠæœŸã‚’è¿”ã™é–¢æ•°

import { format } from "date-fns";

type DateInput = string | Date;

// æ±ºç®—æœˆãŒãã®æœˆã®æœ€çµ‚æ—¥ã§ã‚ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹é–¢æ•°
const isLastDayOfMonthTest = (date: Date): boolean => {
  // æ¸¡ã•ã‚ŒãŸDateã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ–°ãŸã«ãƒ†ã‚¹ãƒˆç”¨Dateã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
  const testDate = new Date(date);
  // Dateã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ—¥ä»˜ã«+1ã‚’åŠ ç®—ã™ã‚‹
  testDate.setDate(testDate.getDate() + 1);
  // ã‚‚ã—æ±ºç®—æœˆã®æœ«æ—¥ã«+1ã—ã¦1ãªã‚‰ãã®ã¾ã¾ã‚»ãƒƒãƒˆã—ã€2æ—¥ãªã©Dateã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç¿Œæœˆã®ç¹°è¶Šã®è¨ˆç®—ãŒ1æ—¥ã«ãªã‚‰ãªã‹ã£ãŸå ´åˆã«ã¯ã€
  // falseã‚’è¿”ã—ã¦ã€ç›´æ¥1ã‚’Dateã«ã‚»ãƒƒãƒˆã™ã‚‹
  return testDate.getDate() === 1;
};

export const getFiscalQuarterTest = (fiscalYearEnd: DateInput, date: DateInput): number => {
  const end = new Date(fiscalYearEnd);
  const checkDate = new Date(date);

  // æ±ºç®—æ—¥ãŒé¢è«‡æ—¥ã‚’éãã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€é©åˆ‡ã«å¹´ã‚’èª¿æ•´
  // const fiscalYear = checkDate > end ? end.getFullYear() + 1 : end.getFullYear();
  const isLastDayUserFiscalEnd = isLastDayOfMonthTest(end);

  let isLeapYear = false;

  // å››åŠæœŸã®é–‹å§‹æ—¥ã‚’è¨ˆç®—
  console.log(`ğŸŒŸæ±ºç®—æœˆ`, format(end, "yyyyå¹´MMæœˆddæ—¥ HH:mm:ss"));
  const quarterStartDates = [];
  for (let i = 0; i < 4; i++) {
    // let year = end.getFullYear();
    // å¹´ã®ã¿ç¾åœ¨ã§ä»–ã¯æ±ºç®—æœˆæ—¥
    const currentYearPeriodEnd = new Date(checkDate.getFullYear(), end.getMonth(), end.getDate());
    let year = checkDate.getFullYear();
    let month = end.getMonth() - 3 * i;
    // 12-0=>12
    // 12-3=>9
    // 12-6=>6
    // 12-9=>3
    let day = end.getDate();
    let quarterEndDate = new Date(year, month, day);

    // console.log("year, month, day", year, month, day);
    // if (month < 0) {
    //   month += 12;
    //   console.log("monthãŒ0æœªæº€ã®ãŸã‚12ã‚’åŠ ç®—", year, month, day);
    // }

    // const yearAdjustment = checkDate > end ? 1 : 0;
    const yearAdjustment = checkDate > currentYearPeriodEnd ? 1 : 0;

    // const quarterStartDate = new Date(end.getFullYear() + yearAdjustment, end.getMonth() - 3 * i, end.getDate() + 1);
    let quarterStartDate: Date;

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ±ºç®—æœˆãŒãã®æœˆã®æœ€çµ‚æ—¥ãªã‚‰ã€å…¨ã¦ã®å››åŠæœŸã‚’ç¿Œæœˆã«ã—ã¦ã€1æ—¥ã‚’ã‚»ãƒƒãƒˆã™ã‚‹
    if (isLastDayUserFiscalEnd) {
      // æ±ºç®—æœˆãŒæœ«æ—¥ã§ã‹ã¤12æœˆãŒæ±ºç®—æœˆã®å ´åˆã€12æœˆã®ã¿æ—¢ã«æ—¥ä»˜ã«+1ã§å¹´ã¨æœˆãŒç¿Œå¹´ã«å¤‰ã‚ã£ã¦ã„ã‚‹ãŸã‚ã€æœˆã®åŠ ç®—ã¯ä¸è¦
      if (end.getMonth() === 11 && month === 11) {
        // if ([2, 4, 6, 9, 11].includes(month + 1)) {
        //   quarterStartDate = new Date(year + yearAdjustment, end.getMonth() - 3 * i, end.getDate() + 1);
        // } else {

        // }
        quarterStartDate = new Date(year + yearAdjustment, end.getMonth() - 3 * i, end.getDate() + 1);
        console.log("ğŸŒŸæ±ºç®—æœˆãŒ12æœˆ31æ—¥ã®ãŸã‚åˆ¥é€”ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆä¸è¦", format(quarterStartDate, "yyyyå¹´MMæœˆddæ—¥"));
      }
      // æ±ºç®—æœˆãŒæœ«æ—¥ã§ã€12æœˆãŒæ±ºç®—æœˆã§ãªã„å ´åˆã®ãƒ«ãƒ¼ãƒˆ
      else {
        // 2æœˆ28æ—¥ãŒæ±ºç®—æœˆæ—¥ã®æ™‚ã®å‡¦ç†
        if (day === 28) {
          quarterStartDate = new Date(year + yearAdjustment, end.getMonth() - 3 * i + 1, 1);
          console.log("ğŸŒŸ2æœˆ28æ—¥ãŒæ±ºç®—æœˆã®å‡¦ç†", format(quarterStartDate, "yyyyå¹´MMæœˆddæ—¥"));
          if (checkDate.getMonth() === 1 && checkDate.getDate() === 29) isLeapYear = true;
          console.log("ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸé–å¹´ 2æœˆ29æ—¥");
        } else {
          // quarterStartDate = new Date(year + yearAdjustment, end.getMonth() - 3 * i, end.getDate() + 1);
          // ï¼‘ãƒ¶æœˆãŒ30æ—¥é–“ã®æœˆã¯æœˆã«ãƒ—ãƒ©ã‚¹ï¼‘ã›ãšã€Œè¥¿å‘ãå£« å°ã®æœˆã€30
          if ([2, 4, 6, 9, 11].includes(end.getMonth() + 1)) {
            quarterStartDate = new Date(year + yearAdjustment, end.getMonth() - 3 * i + 1, 1);
            console.log("ğŸŒŸå°ã®æœˆ", month + 1);
          } else {
            // ï¼‘ãƒ¶æœˆãŒ31æ—¥é–“ã‚ã‚‹æœˆ
            quarterStartDate = new Date(year + yearAdjustment, end.getMonth() - 3 * i + 1, 1);
            console.log("ğŸŒŸå¤§ã®æœˆ", month + 1);
          }
          // quarterStartDate.setMonth(quarterEndDate.getMonth() + 1);
          // quarterStartDate.setDate(1);
          console.log("ğŸŒŸæ±ºç®—æœˆãŒæœ«æ—¥", format(quarterStartDate, "yyyyå¹´MMæœˆddæ—¥"));
        }
      }
      // quarterStartDate.setMonth(quarterStartDate.getMonth() + 1);
    } else {
      quarterStartDate = new Date(year + yearAdjustment, end.getMonth() - 3 * i, end.getDate() + 1);
    }

    console.log(
      `âœ…forãƒ«ãƒ¼ãƒ— ${i}å›ç›®`,
      // `ğŸ’¡ãƒ—ãƒ©ã‚¹1ã—ã¦ã„ãªã„å››åŠæœŸçµ‚äº†æ—¥${format(quarterEndDate, "yyyyå¹´MMæœˆddæ—¥")}`,
      `ğŸ’¡å››åŠæœŸé–‹å§‹æ—¥${format(quarterStartDate, "yyyyå¹´MMæœˆddæ—¥")}`
    );

    // quarterStartDate.setHours(0, 0, 0, 0); //é–‹å§‹æ—¥ã®æ™‚åˆ»ã‚’0ã«æ›´æ–°
    quarterStartDates.unshift(quarterStartDate); // æœ€æ–°ã®å››åŠæœŸã‹ã‚‰é…åˆ—ã«è¿½åŠ (å…ˆé ­ã«è¿½åŠ )
    // quarterStartDates.push(quarterStartDate); // æœ€æ–°ã®å››åŠæœŸã‹ã‚‰é…åˆ—ã«è¿½åŠ (å…ˆé ­ã«è¿½åŠ )
  }

  // é¢è«‡æ—¥ãŒã©ã®å››åŠæœŸã«å±ã™ã‚‹ã‹åˆ¤å®š
  // ã“ã®ãƒ«ãƒ¼ãƒ—ã¯ã€å››åŠæœŸã®é–‹å§‹æ—¥ã®ãƒªã‚¹ãƒˆï¼ˆquarterStartDatesï¼‰ã‚’é †ã«ãƒã‚§ãƒƒã‚¯ã—ã¦ã€é¢è«‡æ—¥ãŒã©ã®å››åŠæœŸã«å±ã™ã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚ãƒªã‚¹ãƒˆã¯æœ€ã‚‚æœ€è¿‘ã®å››åŠæœŸã®é–‹å§‹æ—¥ã‹ã‚‰é †ã«ä¸¦ã‚“ã§ã„ã¾ã™ï¼ˆä¾‹: 12æœˆ1æ—¥ã€9æœˆ1æ—¥ã€6æœˆ1æ—¥ã€3æœˆ1æ—¥ï¼‰ã€‚
  // for (let i = 0; i < 4; i++) {
  for (let i = 0; i < quarterStartDates.length; i++) {
    console.log(`ãƒã‚§ãƒƒã‚¯ ${i}ç•ªç›®`);
    console.log(
      "checkDate < quarterStartDates[i]",
      format(checkDate, "yyyyå¹´MMæœˆdd HH:mm:ss"),
      "<",
      format(quarterStartDates[i], "yyyyå¹´MMæœˆdd HH:mm:ss")
    );
    // 2æœˆ28æ—¥ãŒæ±ºç®—æœˆã§ã€ã‹ã¤2æœˆ29æ—¥ãŒæ¥ãŸå ´åˆã¯ï¼”ã®ç¬¬å››å››åŠæœŸã‚’è¿”ã™
    if (isLeapYear) {
      return 4;
    }
    if (checkDate.getTime() < quarterStartDates[i].getTime()) {
      console.log(`ãƒã‚§ãƒƒã‚¯é€šé ${i}ç•ªç›® ç¬¬${4 - i}å››åŠæœŸ`, format(quarterStartDates[i], "yyyyå¹´MMæœˆdd HH:mm:ss"));
      // return 4 - i;
      return i + 1;
    }
  }
  console.log(`ãƒã‚§ãƒƒã‚¯é€šã‚‰ãš ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®1ã‚’è¿”ã™`);
  return 1; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§1Qã‚’è¿”ã™(é¢è«‡æ—¥ãŒæœ€æ–°ã®å››åŠæœŸä»¥å†…ã«ã‚ã‚‹å ´åˆ)
};

// ä½¿ç”¨ä¾‹
// console.log(getFiscalQuarter('March 20, 2023', 'June 21, 2023')); // 1 (2Q)
// console.log(getFiscalQuarter('December 31, 2023', 'January 1, 2023')); // 1 (1Q)

/**
setMonth ãƒ¡ã‚½ãƒƒãƒ‰: setMonth ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€Date ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æœˆã‚’è¨­å®šã—ã¾ã™ã€‚ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯2ã¤ã®å¼•æ•°ã‚’å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ç¬¬1å¼•æ•°: è¨­å®šã™ã‚‹æœˆï¼ˆ0 ã‹ã‚‰ 11 ã¾ã§ã®æ•°å€¤ã§ã€0 ã¯1æœˆã€11 ã¯12æœˆã‚’æ„å‘³ã—ã¾ã™ï¼‰ã€‚
ç¬¬2å¼•æ•°ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰: è¨­å®šã™ã‚‹æœˆã®æ—¥ï¼ˆ1 ã‹ã‚‰ 31 ã¾ã§ã®æ•°å€¤ï¼‰ã€‚
 */

/**
 * 
 // é¢è«‡æ—¥ãŒã©ã®å››åŠæœŸã«å±ã™ã‚‹ã‹åˆ¤å®š
  for (let i = 0; i < 4; i++) {
    if (checkDate >= quarterStartDates[i]) {
      return 4 - i;
    }
  }
for ãƒ«ãƒ¼ãƒ—: for (let i = 0; i < 4; i++) { ... }

ã“ã®ãƒ«ãƒ¼ãƒ—ã¯ã€å››åŠæœŸã®é–‹å§‹æ—¥ã®ãƒªã‚¹ãƒˆï¼ˆquarterStartDatesï¼‰ã‚’é †ã«ãƒã‚§ãƒƒã‚¯ã—ã¦ã€é¢è«‡æ—¥ãŒã©ã®å››åŠæœŸã«å±ã™ã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚ãƒªã‚¹ãƒˆã¯æœ€ã‚‚æœ€è¿‘ã®å››åŠæœŸã®é–‹å§‹æ—¥ã‹ã‚‰é †ã«ä¸¦ã‚“ã§ã„ã¾ã™ï¼ˆä¾‹: 12æœˆ1æ—¥ã€9æœˆ1æ—¥ã€6æœˆ1æ—¥ã€3æœˆ1æ—¥ï¼‰ã€‚
é¢è«‡æ—¥ã®å››åŠæœŸã®åˆ¤å®š: if (checkDate >= quarterStartDates[i]) { ... }

ã“ã“ã§ã€checkDateï¼ˆé¢è«‡æ—¥ï¼‰ãŒã€ãƒ«ãƒ¼ãƒ—ä¸­ã®ç‰¹å®šã®å››åŠæœŸã®é–‹å§‹æ—¥ï¼ˆquarterStartDates[i]ï¼‰ã‚ˆã‚Šã‚‚åŒã˜ã‹ãã‚Œä»¥é™ã§ã‚ã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚
é¢è«‡æ—¥ãŒå››åŠæœŸã®é–‹å§‹æ—¥ã¨åŒã˜ã‹ãã‚Œä»¥é™ã§ã‚ã‚Œã°ã€ãã®å››åŠæœŸã«å±ã™ã‚‹ã¨åˆ¤æ–­ã•ã‚Œã¾ã™ã€‚
å››åŠæœŸã®ç•ªå·ã®è¿”å´: return 4 - i;

é¢è«‡æ—¥ãŒç‰¹å®šã®å››åŠæœŸã®ç¯„å›²ã«å«ã¾ã‚Œã‚‹ã¨åˆ¤æ–­ã•ã‚ŒãŸå ´åˆã€ãã®å››åŠæœŸã®ç•ªå·ï¼ˆ1, 2, 3, 4ï¼‰ã‚’è¿”ã—ã¾ã™ã€‚
å››åŠæœŸã®ãƒªã‚¹ãƒˆã¯æœ€æ–°ã®å››åŠæœŸã‹ã‚‰å§‹ã¾ã‚‹ãŸã‚ã€4 - i ã§å››åŠæœŸã®ç•ªå·ã‚’è¨ˆç®—ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€i = 0 ã®å ´åˆã¯æœ€æ–°ã®å››åŠæœŸï¼ˆ4Qï¼‰ã€i = 1 ã®å ´åˆã¯ãã®å‰ã®å››åŠæœŸï¼ˆ3Qï¼‰ã¨ã„ã†ã‚ˆã†ã«è¨ˆç®—ã•ã‚Œã¾ã™ã€‚
ã“ã®ãƒ­ã‚¸ãƒƒã‚¯ã«ã‚ˆã‚Šã€ä»»æ„ã®æ—¥ä»˜ãŒä¸ãˆã‚‰ã‚ŒãŸæ±ºç®—æ—¥ã®åŸºæº–ã§ã©ã®å››åŠæœŸã«å±ã™ã‚‹ã‹ã‚’æ­£ç¢ºã«åˆ¤æ–­ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
 */

/**

*3
ã“ã®ã‚³ãƒ¼ãƒ‰ã®ç›®çš„ã¯ã€å››åŠæœŸã®é–‹å§‹æ—¥ãŒæ±ºç®—æ—¥ã‚ˆã‚Šå¾Œã«ãªã‚‹å ´åˆï¼ˆã¤ã¾ã‚Šã€ç¿Œå¹´ã«ã¾ãŸãŒã‚‹å ´åˆï¼‰ã€å››åŠæœŸã®é–‹å§‹æ—¥ã®å¹´ã‚’1å¹´æ¸›ã‚‰ã™ã“ã¨ã§ã™ã€‚

å…·ä½“ä¾‹
æ±ºç®—æ—¥ãŒ12æœˆ31æ—¥ã®å ´åˆ:

æ±ºç®—æ—¥ï¼ˆendï¼‰ã¯ã€Œ12æœˆ31æ—¥ã€ã§ã™ã€‚
ç¬¬1å››åŠæœŸã®é–‹å§‹æ—¥ã‚’è¨ˆç®—ã™ã‚‹ã¨ãï¼ˆi = 0ï¼‰ã€å››åŠæœŸã®é–‹å§‹æ—¥ï¼ˆquarterStartDateï¼‰ã¯ã€Œ1æœˆ1æ—¥ã€ã«è¨­å®šã•ã‚Œã¾ã™ã€‚
ã“ã®å ´åˆã€ã€Œ1æœˆ1æ—¥ã€ã¯ã€Œ12æœˆ31æ—¥ã€ã‚ˆã‚Šå¾Œã«ãªã‚Šã¾ã™ï¼ˆç¿Œå¹´ã®1æœˆ1æ—¥ã¨ãªã‚‹ï¼‰ã€‚
ã—ãŸãŒã£ã¦ã€quarterStartDate ã®å¹´ã‚’1å¹´æ¸›ã‚‰ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆä¾‹: 2024å¹´1æœˆ1æ—¥ã‚’2023å¹´1æœˆ1æ—¥ã«å¤‰æ›´ï¼‰ã€‚
æ±ºç®—æ—¥ãŒ6æœˆ20æ—¥ã®å ´åˆ:

æ±ºç®—æ—¥ï¼ˆendï¼‰ã¯ã€Œ6æœˆ20æ—¥ã€ã§ã™ã€‚
ç¬¬1å››åŠæœŸã®é–‹å§‹æ—¥ã‚’è¨ˆç®—ã™ã‚‹ã¨ãï¼ˆi = 0ï¼‰ã€å››åŠæœŸã®é–‹å§‹æ—¥ï¼ˆquarterStartDateï¼‰ã¯ã€Œ6æœˆ21æ—¥ã€ã«è¨­å®šã•ã‚Œã¾ã™ã€‚
ã“ã®å ´åˆã€ã€Œ6æœˆ21æ—¥ã€ã¯ã€Œ6æœˆ20æ—¥ã€ã‚ˆã‚Šå¾Œã«ãªã‚Šã¾ã™ãŒã€åŒã˜å¹´ã§ã™ã€‚
ã—ãŸãŒã£ã¦ã€å¹´ã®èª¿æ•´ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚
ã“ã®ã‚ˆã†ã«ã€ã“ã®ã‚³ãƒ¼ãƒ‰ã¯å››åŠæœŸã®é–‹å§‹æ—¥ãŒæ±ºç®—æ—¥ã‚ˆã‚Šå¾Œã®æ—¥ä»˜ã«ãªã‚‹å ´åˆã«ã®ã¿å¹´ã‚’èª¿æ•´ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å››åŠæœŸã®é–‹å§‹æ—¥ãŒæ­£ç¢ºã«æ±ºç®—æ—¥ã®ç¿Œæ—¥ã‹ã‚‰å§‹ã¾ã‚‹ã‚ˆã†ã«ä¿è¨¼ã•ã‚Œã¾ã™ã€‚ã“ã®èª¿æ•´ã«ã‚ˆã‚Šã€å››åŠæœŸã®é–‹å§‹æ—¥ãŒå¸¸ã«æ±ºç®—æ—¥ã®ç¿Œæ—¥ã«è¨­å®šã•ã‚Œã€é©åˆ‡ãªå¹´ã§è¨ˆç®—ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºå®Ÿã«ã—ã¾ã™ã€‚

 */

/**

*4
// å››åŠæœŸã®é–‹å§‹æ—¥ã®å¹´ã‚’é¢è«‡æ—¥ã®å¹´ã«åˆã‚ã›ã‚‹
quarterStartDates.forEach((quarterStartDate) => {
  if (quarterStartDate.getFullYear() < checkDate.getFullYear()) {
    quarterStartDate.setFullYear(checkDate.getFullYear());
  }
});

ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€å„å››åŠæœŸã®é–‹å§‹æ—¥ã®å¹´ãŒé¢è«‡æ—¥ã®å¹´ã‚ˆã‚Šã‚‚å‰ã®å ´åˆã€å››åŠæœŸã®é–‹å§‹æ—¥ã®å¹´ã‚’é¢è«‡æ—¥ã®å¹´ã«æ›´æ–°ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€é¢è«‡æ—¥ãŒæ‰€å±ã™ã‚‹æ­£ç¢ºãªå››åŠæœŸã‚’åˆ¤å®šã§ãã¾ã™ã€‚

å…·ä½“ä¾‹
æ±ºç®—æ—¥ãŒ12æœˆ31æ—¥ã§ã€é¢è«‡æ—¥ãŒç¿Œå¹´ã®2æœˆ15æ—¥ã®å ´åˆ:

æ±ºç®—æ—¥ï¼ˆendï¼‰: 12æœˆ31æ—¥ï¼ˆä¾‹: 2023å¹´ï¼‰
é¢è«‡æ—¥ï¼ˆcheckDateï¼‰: ç¿Œå¹´ã®2æœˆ15æ—¥ï¼ˆä¾‹: 2024å¹´ï¼‰
å››åŠæœŸã®é–‹å§‹æ—¥ï¼ˆquarterStartDatesï¼‰ã®ä¸€ã¤ã¯ã€å‰å¹´ã®12æœˆ31æ—¥ã®ç¿Œæ—¥ã€ã¤ã¾ã‚Š1æœˆ1æ—¥ï¼ˆä¾‹: 2023å¹´1æœˆ1æ—¥ï¼‰ã«ãªã‚Šã¾ã™ã€‚
ã—ã‹ã—ã€é¢è«‡æ—¥ã¯2024å¹´ãªã®ã§ã€ã“ã®å››åŠæœŸã®é–‹å§‹æ—¥ã¯2023å¹´ã§ã¯ãªã2024å¹´ã§ã‚ã‚‹ã¹ãã§ã™ã€‚
ãã®ãŸã‚ã€quarterStartDate.setFullYear(checkDate.getFullYear()) ã‚’ä½¿ã£ã¦ã€å››åŠæœŸã®é–‹å§‹æ—¥ã®å¹´ã‚’é¢è«‡æ—¥ã®å¹´ï¼ˆ2024å¹´ï¼‰ã«æ›´æ–°ã—ã¾ã™ã€‚
æ±ºç®—æ—¥ãŒ6æœˆ20æ—¥ã§ã€é¢è«‡æ—¥ãŒåŒã˜å¹´ã®7æœˆ10æ—¥ã®å ´åˆ:

æ±ºç®—æ—¥ï¼ˆendï¼‰: 6æœˆ20æ—¥ï¼ˆä¾‹: 2023å¹´ï¼‰
é¢è«‡æ—¥ï¼ˆcheckDateï¼‰: åŒã˜å¹´ã®7æœˆ10æ—¥ï¼ˆä¾‹: 2023å¹´ï¼‰
ã“ã®å ´åˆã€å››åŠæœŸã®é–‹å§‹æ—¥ã®ä¸€ã¤ã¯6æœˆ21æ—¥ï¼ˆä¾‹: 2023å¹´6æœˆ21æ—¥ï¼‰ã§ã™ã€‚
é¢è«‡æ—¥ã¨å››åŠæœŸã®é–‹å§‹æ—¥ã¯åŒã˜å¹´ãªã®ã§ã€å¹´ã®æ›´æ–°ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚
ã“ã®å‡¦ç†ã«ã‚ˆã‚Šã€å››åŠæœŸã®é–‹å§‹æ—¥ãŒå¸¸ã«é¢è«‡æ—¥ã®å¹´ã¨ä¸€è‡´ã™ã‚‹ã‚ˆã†ã«èª¿æ•´ã•ã‚Œã€å››åŠæœŸã®è¨ˆç®—ãŒæ­£ç¢ºã«è¡Œã‚ã‚Œã¾ã™ã€‚

 */
